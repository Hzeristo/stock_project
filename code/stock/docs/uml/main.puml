@startuml main

class SecuritiesAccount {
    + id: Long
    + accountNumber: String
    + registrationDate: LocalDate
    + name: String
    + idCardNo: String
    + phone: String
    + address: String
}

class IndividualSecuritiesAccount {
    + individualGender: String
    + individualOccupation: String
    + individualEducation: String
    + individualEmployer: String
}

class CorporateSecuritiesAccount {
    + corporationName: String
    + registrationNumber: String
    + businessLicenseNumber: String
    + authorizedTraderName: String
    + authorizedTraderIdCardNo: String
    + authorizedTraderPhone: String
    + authorizedTraderAddress: String
}

SecuritiesAccount <-- AccountStatus : "status"

enum AccountStatus {
    ACTIVE
    SUSPENDED
    CLOSED
}

SecuritiesAccount <|-- IndividualSecuritiesAccount
SecuritiesAccount <|-- CorporateSecuritiesAccount
class CapitalAccount {
    + id: Long
    + capitalAccountNumber: String
    + type: CapitalAccountType
    + balance: BigDecimal
    + availableBalance: BigDecimal
    + frozenBalance: BigDecimal
    + currency: Currency
    + bankName: String
    + bankAccountNumber: String
    + status: AccountStatus
}

enum CapitalAccountType {
    TRADE
    FUND
}

enum Currency {
    CNY
    USD
}

CapitalAccount <-- CapitalAccountType : "type"
CapitalAccount <-- AccountStatus : "status"
CapitalAccount <-- Currency : "currency"

SecuritiesAccount <-- CapitalAccount : "1..*"


class Order {
    + id: Long
    + accountId: Long
    + stockCode: String
    + orderType: OrderType
    + orderQuantity: int
    + orderPrice: BigDecimal
    + orderValidity: OrderValidity
    + orderKind: OrderKind
    + orderStatus: OrderStatus
    + orderTime: Timestamp
}

enum OrderType {
    BUY
    SELL
}

enum OrderValidity {
    DAY_ORDER
}

enum OrderKind {
    LIMIT
    MARKET
    STOP
}

enum OrderStatus {
    PENDING     
    EXECUTED    
    PARTIAL
    CANCELED
    FAILED
}

Order <-- OrderType : "orderType"
Order <-- OrderValidity : "orderValidity"
Order <-- OrderKind : "orderKind"
Order <-- OrderStatus : "orderStatus"

Order --> SecuritiesAccount

class Execution {
    + id: Long
    + orderId: Long
    + securitiesAccountId: Long
    + capitalAccountId: Long
    + executionPrice: BigDecimal
    + executionQuantity: int
    + executionTime: Timestamp
}

Order <-- Execution : "1..*"

Execution --> SecuritiesAccount
Execution --> CapitalAccount

class Stock {
    + id: Long
    + stockCode: String
    + stockName: String
    + exchange: Exchange
    + fullName: String
    + industry: String
    + sector: String
    + isin: String
    + status: StockStatus
    + businessScope: String
}
Order --> "1" Stock

class Holding {
    + id: Long
    + securitiesAccountId: Long
    + stockId: Long
    + quantity: int
    + averageCost: BigDecimal
    + lastUpdated: Timestamp
}

Holding --> "1" Stock

Holding --> "1" SecuritiesAccount

@enduml